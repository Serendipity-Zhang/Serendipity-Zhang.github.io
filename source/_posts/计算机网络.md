---
title: 计算机网络
---
# 比较 http0.9 和http1.0 的区别
- http0.9 只是一个简单的协议，只有一个get 方法，没有首部，目标用来获取HTML
- http1.0 协议大量的内容：首部、响应码、重定向、错误、条件请求、内容编码等
```txt
http0.9流程

客户端,构建请求，通过DNS 查询IP 地址 ,
三次握手建立TCP 连接,客户端发起请求,服务器相应。
四次握手,断开 TCP连接（与服务器只有一个来回）


http1.0 流程

客户端,构建请求,通过DNS查询IP地址,
三次握手建立 TCP连接 ,客户端发起请求,服务器响应,
四次握手,断开TCP连接(与服务器只有两个来回)

--- 因为不足缺陷就有了http1.1 --- 

```

# 关于 http1.1 以及http 2
```txt
http1.1 中浏览器再也不用为每个请求重新发起一个TCP连接,增加内容有：缓存相关首部的扩展
OPTIONS方法，UPgrade首部,Range请求，压缩和传输编码,管道化等。
但是还是不能够满足不了现在的web开发展需求,so ,就有了http 2 版本。

使用http2 会比http1.1 在使用 TCP 时 用户体验的感知多数延迟的效果有了量化 的改善，
以及提升了TCP 连接 的利用率(并行的实现机制不依赖与服务器的建立多个连接)

对于http2 ，你可以用来运行一个 HTTP2 的服务器,获取并安装一个http2 的web服务器,
下载并安装 一张TLS 证书,让浏览器和服务器 通过http2 来连接 （从数字证书认证机构申请 一张证书）
```
```txt
了解http2 的协议 先让我们了解一下 web 页面的请求,就是用户在浏览器中呈现的效果,
发生了些什么：获取资源的步骤：
把待 请求的URL 放入队列，判断URL 是否亦在请求队列，不在的话 就结束, 
在的话就判断 请求域名 是否在DNS缓存中，没有的话就解析域名，
有的话就就开启 TCP连接 ,进行HTTP 请求 ,初始化 完成TLS协议握手,向页面对应的URL 发送请求。

接收响应以及 页面渲染 步骤：
接收请求,判断 是否HTML 页面 ,是就解析HTML,对页面的引用资源排优先级，
添加引用资源到请求队列（如果页面上的关键资源已经接收到,就开始渲染页面）,
判断是否还要继续接收资源,继续解析渲染,直到结束。

```
 # HTTP 的几种请求方法 用途

 - 第一种方法 GET ：发送一个请求 来获取 服务器上的 某一些资源
 - 第二种方法 POST:向URL 指定的资源提交数据或附加新的数据
 - 第三种方法 PUT ：和POST 方法一样，可以向服务器 提交数据，但是他们之间 
 也有所不同PUT 指定了 资源在服务器的位置，而POST没有哦
- 第四种方法 HEAD 方法：请求页面的首部
- 第五种DELETE方法 ：删除服务器中的某资源 
- 第六种OPTIOPS 方法： 它用于获取当前URL 所支持的方法,如果请求成功,
在 ALLOW 的头包含 类似GET POST 等信息。
- 第七种 TARCE 方法：用于激发一个远程的,应用曾的请求消息回路。
- 第八种 CONNECT 方法：把请求连接转换到TCP/IP通道。

# 从浏览器地址栏 输入URL 到显示页面的步骤

```txt
浏览器 根据请求的URL交给DNS 域名解析,查找真正的IP地址,向服务器发送请求,
服务器交给后台处理后,返回数据,浏览器会接收到文件数据，比如：html,css,js 图像等。
然后浏览器 会对加载的到的资源进行语法解析，建立相应的内部数据结构,
载入 解析 到的资源文件，页面渲染，完成显示页面效果

详解：
从浏览器 接受url，开始进行网络请求线程，并发出一个完正的HTTP 请求；
从服务器段接受请求到对应的后台接收请求，然后是后台和前台的http交互，
其中的缓存问题（HTTP缓存），浏览器接收到的http 数据包的解析流程，
css的可视化格式模型，js引擎的解析过程等，其他呈现页面效果。
```
```txt
1.渲染引擎，是负责取得网页的内容，整理信息,以及计算 网页的 显示 方式，
然后输出 到显示器 上
2.js引擎 是用于解析 和执行js 来实现网页 的 动态效果

---------------
浏览器的内核 的不同 对于 网页的 语法解释 会有不同，所以渲染 的效果也不同，
其实吗，最开始 渲染引擎 和js 引擎是没有区别的，后来js引擎越来越独立 so， 
内核就倾向于渲染引擎了。对于资源请求/获取，资源响应/页面渲染，
会给网络带宽和设备资源带来压力，
这个时候就会考虑到web的性能优化。

```
# WEB 的性能优化
```txt
其中里面的性能关键
什么是数据包 
数据包(IP数据包) 指封装在 固定结构 的一系列 字节，
它定义了数据包的长度，传输的细节，以及其他 与tcp 相关 的 信息。
延迟 ：指ip 数据包从一个网络端点 所花费的时间
（所花费的时间在于往返时延，是延迟的时间的两倍）
带宽： 只要带宽没有饱和，两个端点 的连接会一次处理 
尽可能多的 数据量（所以带宽可能会成为性能 的瓶颈）
建立连接时间:在客户端和服务器之间 建立连接往返数据（三次握手）
TCP的三次握手：客户端向服务器 发送 SYN包,服务器端 返回相应的SYN的 ACK响应 
以及新的 SYN包，然后客户端返回相应的 ACK（在客户端和服务器之间建立正常的TCP网络连接时，
客户端首先发出一个SYN消息，服务器 使用 SYN+ACK 应答 表示接受 这个消息 ，
最后客户端以ACk消息响应 ）


SYN 是同步序列编号，是TCP/IP 建立连接 时使用 的 握手信息
ACK 是确认字符，在数据通信中，接受站给发给站的 一种 传输类 的 控制字符 。
表示 发来的 数据已经确认 接受无误。
在TCP/IP协议中，如果接受方成功的接收到了数据，
那么会回复一个ACk数据,通过ACK 信号 有自己固定格式，长度大小，
由接收方回复给发送方。

```

```txt
详解 三次握手
第一次握手,建立连接时，客户端发送SYN包到服务器,并进入到SYN_SENT状态，
等待服务器确认,其中SYN就是同步序列编号

第二次握手 服务器收到SNY包，必须确认客户的SYN,同时自己也发送 一个SYN 包,
即是 SYN+ACK 包，此时服务器进入 SYN_RECV状态

第三次握手 ，客户端收到服务器 的SYN+ACK包，向服务器发送确认包ACK,此包发送完毕，
客户端和服务器进入ESTABLISHED(TCP成功连接)状态,完成三次握手。
完成三次握手，客户端和服务器 开始传输数据

-----------------------
  TLS协商时间 (TLS 会造成 额外的往返传输)
  1. 客户端 发起HTTP 连接,需要进行传输层 安全协议协商
  2.TLS用来取代 安全套接层SSL
  除了网络，还有页面内容本身或服务器性能，如首字节时间 TTFB ，
  内容下载时间，开始渲染时间，文档加载完成时间等。
  那么什么是 TTFB ,它是指 客户端从开始定位 到web页面 ,
  至接受 到主体页面响应 的第一字节 所耗费 的 内容下载 时间,他的测量,
  从浏览器 发起请求 至收到 其 第一字节之间的耗时。
  内容下载 时间 是等同于 被请求资源 的最后字节到达的时间。
  开始渲染时间 从客户端 看到空白页面的时长。

```
# web 性能优化技术 （减少客户端网络延迟和优化页面渲染性能来提升web性能）

```txt
优化技术
- DNS查询优化
- 客户端缓存
- 优化TCP 连接
- 避免重定向
- 网络边缘 的缓存
- 条件缓存
- 压缩和代码极简化
- 图片优化
```
# http1.1
- 改进 持久连接 和cdn 域名的分片机制
- 不成熟 的HTTP管道化
- 提供虚拟主机支持
- 对动态生成 的内容完美支持
- 引入cookie以及安全机制
```txt
对于http1的问题，迎接来了HTTP2 其中http1 的问题
队头阻塞 ，大多数情况下，浏览器会希望同时获取许多资源，
但http1 未提供机制 来同时请求这些资源
如果仅是使用一个连接，需要发送请求，等待响应，然后才能发送下一个请求。

在http1 中 要给特性 为管道化，可以 允许一次 发送一组请求，
但是需要按照发送顺序依次接受 响应，
所以在请求应答过程中，如果发生什么情况,剩下的工作都会被阻塞，
这就是队头 阻塞（阻塞在那次请求应答发生错误），
阻塞网络传输和web页面的渲染，直到失去响应。
```